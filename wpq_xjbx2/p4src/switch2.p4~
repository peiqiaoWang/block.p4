#include "includes/header.p4"
#include "includes/parser.p4"

action _drop(){
    drop();
}

action _nop1(){
}

#define MAC_LEARN_RECEIVER 1024

field_list mac_learn_digest{
    ethernet.src_addr;
    standard_metadata.ingress_port;
}

action mac_learn(){
    generate_digest(MAC_LEARN_RECEIVER, mac_learn_digest);
}

table smac(){
    reads{
        ethernet.src_addr : exact;
    }
    actions {mac_learn; _nop1;}
    size : 512;
}

control ingress{

}

control egress{
}

